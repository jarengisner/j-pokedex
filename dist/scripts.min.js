let pokemonRepository = (function () {
  let e = [];
  function t(t) {
    e.push(t);
  }
  function n() {
    return e;
  }
  function o() {
    document.querySelector('.load').classList.remove('hidden');
  }
  function i() {
    document.querySelector('.load').classList.add('hidden');
  }
  function r(e) {
    return (
      o(),
      fetch(e.detailsUrl)
        .then(function (e) {
          return e.json();
        })
        .then(function (t) {
          pokeSprite = t.sprites.front_default;
          let n = document.querySelector('#pokemon-div-id'),
            o = document.createElement('li');
          o.classList.add(
            'list-group-item',
            'col-xl-4',
            'col-lg-4',
            'col-md-6',
            'col-sm-12'
          );
          let r = document.createElement('button');
          (r.innerText = e.name),
            r.classList.add('btn-dark', 'btn-block', 'btn-primary'),
            r.setAttribute('data-toggle', 'modal'),
            r.setAttribute('data-target', '#exampleModal');
          let l = document.createElement('img');
          l.setAttribute('src', pokeSprite),
            r.appendChild(l),
            o.appendChild(r),
            n.appendChild(o),
            r.addEventListener('click', function (t) {
              a(e), console.log(e);
            }),
            i();
        })
        .catch(function (e) {
          console.error('Could not load Pokemon');
        })
    );
  }
  function a(e) {
    pokemonRepository.loadDetails(e).then(function () {
      var t;
      let n, o, i, r, a, l;
      (t = e),
        (n = document.querySelector('.modal-title')),
        (o = document.querySelector('.modal-body')),
        document.querySelector('.modal-footer'),
        (n.innerText = ''),
        (o.innerHTML = ''),
        (n.innerText = t.name),
        (i = document.createElement('img')),
        i.setAttribute('src', t.imageUrl),
        i.classList.add('poke-sprite'),
        (r = document.createElement('p')),
        r.classList.add('.modal-text'),
        (r.innerText = `Height: ${t.height}`),
        (a = document.createElement('p')),
        a.classList.add('.modal-text'),
        (a.innerText = `Weight: ${t.weight}`),
        (l = document.createElement('ul')),
        l.classList.add('.types-container'),
        t.types.forEach((e) => {
          var t, n;
          let o, i;
          (t = e),
            (o = document.createElement('li')),
            o.classList.add('typeLi'),
            (i = document.createElement('button')),
            i.classList.add('buttonForType'),
            (i.innerText = t.type.name),
            o.appendChild(i),
            l.appendChild(o),
            (n = i.innerText),
            i.classList.add(`${n}-type`);
        }),
        o.appendChild(i),
        o.appendChild(r),
        o.appendChild(a),
        o.appendChild(l);
    });
  }
  return (
    document.querySelector('#modal-container'),
    document
      .querySelector('.search-now')
      .addEventListener('click', function (e) {
        e.preventDefault();
        let t = document.getElementById('search-input');
        pokemonRepository.search(t.value);
      }),
    {
      add: t,
      getPokemon: n,
      addListItem: r,
      loadList: function e() {
        return (
          o(),
          fetch('https://pokeapi.co/api/v2/pokemon/?limit=500')
            .then(function (e) {
              return e.json();
            })
            .then(function (e) {
              e.results.forEach(function (e) {
                t({ name: e.name, detailsUrl: e.url }), i();
              });
            })
            .catch(function (e) {
              console.error(e), i();
            })
        );
      },
      loadDetails: function e(t) {
        return (
          o(),
          fetch(t.detailsUrl)
            .then(function (e) {
              return e.json();
            })
            .then(function (e) {
              (t.imageUrl = e.sprites.front_default),
                (t.height = e.height),
                (t.types = e.types),
                (t.weight = e.weight),
                i();
            })
            .catch(function (e) {
              console.error(e), i();
            })
        );
      },
      showDetails: a,
      search: function t(n) {
        (document.querySelector('#pokemon-div-id').innerHTML = ''),
          e
            .filter((e) => e.name.toLowerCase().includes(n.toLowerCase()))
            .forEach((e) => {
              r(e);
            });
      },
    }
  );
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getPokemon().forEach(function (e) {
    pokemonRepository.addListItem(e);
  });
});
